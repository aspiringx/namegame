# Local Network SSL Testing (ngrok Alternative)

This guide explains how to set up a local development environment that uses a real, browser-trusted SSL certificate. This allows you to test on various devices on your local network without using a tunneling service like `ngrok`.

## Prerequisites

- [Homebrew](https://brew.sh/) for installing `mkcert`.
- [Node.js](https://nodejs.org/) and npm.

## Step 1: Install Required Tools

First, install `mkcert` to create trusted local certificates and `local-ssl-proxy` to serve your app over HTTPS.

```bash
brew install mkcert
npm install -g local-ssl-proxy
```

## Step 2: Create a Local Certificate Authority (CA)

Next, install a local CA in your system's trust store. This is a **one-time command**. Your browser will automatically trust any certificates generated by `mkcert`.

```bash
mkcert -install
```
This may ask for your system password.

## Step 3: Project-Specific Setup

These steps need to be done once per project.

### 1. Generate the Certificate

Navigate to your project's root directory and run `mkcert` to generate the certificate files for your chosen local domain. We'll use `local.namegame.app` for this project.

```bash
cd /path/to/your/project
mkcert local.namegame.app
```

This creates two files in your project directory:
- `local.namegame.app.pem` (the certificate)
- `local.namegame.app-key.pem` (the private key)

### 2. Update Your Hosts File

You need to tell your computer that `local.namegame.app` should point to your local machine. This requires editing the `/etc/hosts` file with administrator privileges.

```bash
sudo nano /etc/hosts
```

Add the following line to the end of the file:

```
127.0.0.1   local.namegame.app
```

Save the file by pressing `Ctrl+X`, then `Y`, and `Enter`.

### 3. Add NPM Script to `package.json`

Add a script to your `package.json` to easily start the SSL proxy. The proxy will listen for secure HTTPS traffic and forward it to your running Next.js application.

```json
{
  "scripts": {
    // ... other scripts
    "start": "next start",
    "start:ssl": "local-ssl-proxy --key local.namegame.app-key.pem --cert local.namegame.app.pem --source 3001 --target 3000"
  }
}
```

- `--key` and `--cert`: Point to the files you generated.
- `--source 3001`: The HTTPS port the proxy will listen on.
- `--target 3000`: The HTTP port your Next.js app runs on.

## Step 4: Run the Application

To run your application with SSL, you'll need two separate terminal windows.

**Terminal 1: Build and Start Your Next.js App**

```bash
npm run build
npm start
```
Your app is now running on `http://localhost:3000`.

**Terminal 2: Start the SSL Proxy**

```bash
npm run start:ssl
```
The proxy is now listening on `https://localhost:3001` (and `https://local.namegame.app:3001`).

### Access Your Site

You can now access your application securely at `https://local.namegame.app:3001` from any browser on your computer or any other device connected to the same local network.
