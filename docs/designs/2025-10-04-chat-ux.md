# Chat UX

**Date:** October 4, 2025  
**Status:** Design Phase  
**Context:** Real-time chat integration with multi-group community platform

## Problem Statement

NameGame users belong to multiple groups and have relationships both within groups and across groups. Chat needs to be **user-centric** (not group-centric) while respecting the context of where conversations originate and who users can communicate with.

### Key Challenges
- Users need to chat across all their groups from a unified interface
- Permission model varies by context (group members vs established relationships)
- Mobile requires full-screen experience without losing current context
- Must feel intuitive despite underlying complexity

## Design Principles

### 1. User-Centric Chat
- Single unified chat interface across all groups
- Conversations persist regardless of current group context
- Chat badge shows aggregate unread count from all conversations

### 2. Context-Aware Permissions
- **Group Context**: Can message any current group member
- **Global Context**: Can only message people with established UserUser relationships
- **Group-wide**: Special broadcast to entire group

### 3. Familiar UX Patterns
- **Mobile**: Full-screen modal/drawer (like WhatsApp)
- **Desktop**: Top-right dropdown (like Facebook)
- **Navigation**: Clear close/back options to return to previous context

## UX Flow Design

### Mobile Chat Flow (Option A: Context-First)

```
1. Chat Badge (with unread count)
   ↓ [Tap]
   
2. Conversation List
   - Recent conversations (most recent first)
   - Context indicators (group name, global, etc.)
   - Two prominent action buttons:
     [+ New in Current Group] [+ New Global Message]
   ↓ [Tap new message]
   
3. Scope Selection
   - If "New in Current Group": Show current group members
   - If "New Global Message": Show UserUser connections
   - Special option: "Message Entire Group" (if in group context)
   ↓ [Select participants]
   
4. Chat Interface
   - Full-screen conversation
   - Clear header showing participants and context
   - Easy back/close to return to previous app context
```

### Desktop Chat Flow

```
Chat Icon (top-right) → Dropdown with:
- Recent conversations preview
- "View All Messages" → Full chat interface
- Quick actions based on current context
```

## Conversation Types & Database Mapping

### 1. Direct Messages (1-on-1 or small group)
- `ChatConversation.type = 'direct'`
- `ChatConversation.groupId = NULL` (global) or specific group
- Participants can be from same group or across groups

### 2. Group-wide Messages
- `ChatConversation.type = 'group'`
- `ChatConversation.groupId = [specific group]`
- All current group members are participants

### 3. Cross-Group Messages
- `ChatConversation.type = 'direct'`
- `ChatConversation.groupId = NULL`
- Only allowed between users with UserUser relationships

## Context Indicators

### Visual Cues for Conversation Origin
- **Group conversations**: Group name/icon in conversation list
- **Global conversations**: "Global" or person icons
- **Group-wide**: "Everyone in [Group Name]"

### Permission Clarity
- When starting new chat, clearly show available participant pool
- "Choose from [Current Group]" vs "Choose from Your Connections"

## Mobile UX Specifications

### Chat Badge
- Position: Bottom navigation (thumb-friendly)
- Shows aggregate unread count across all conversations
- Red badge for unread messages, gray when no unreads

### Full-Screen Modal
- Slides up from bottom (iOS) or slides in from right (Android)
- Clear "X" or back arrow to close
- Maintains previous app state when closed
- Smooth transitions to avoid jarring context switches

### Conversation List
- Most recent conversation at top
- Preview of last message
- Timestamp (relative: "2m ago", "Yesterday")
- Unread indicators per conversation
- Swipe actions for archive/delete (future)

## Desktop UX Specifications

### Top-Right Integration
- Chat icon next to notifications and profile
- Dropdown shows recent conversations
- Click "View All" opens dedicated chat interface
- Notification badges on icon

### Chat Interface Options
- **Option 1**: Dedicated chat page (like Facebook Messenger web)
- **Option 2**: Persistent sidebar (like Discord)
- **Option 3**: Modal overlay (like LinkedIn)

*Recommendation: Start with Option 1 (dedicated page) for simplicity*

## Implementation Priorities

### Phase 1: Core Chat Flow
1. Mobile conversation list with context-aware new message buttons
2. Basic participant selection (group vs global)
3. Full-screen chat interface with proper back navigation

### Phase 2: Context Refinements
1. Visual indicators for conversation types
2. Group-wide messaging
3. Desktop chat integration

### Phase 3: Advanced Features
1. Message search across conversations
2. Conversation management (archive, delete, mute)
3. Rich media sharing
4. Typing indicators and read receipts

## Success Metrics

### Usability
- Users can start appropriate conversations without confusion
- Clear understanding of who can see messages
- Smooth context switching between chat and main app

### Adoption
- High engagement with cross-group messaging
- Reduced reliance on external messaging apps
- Positive feedback on chat discoverability

## Implementation Strategy: Start Simple, Avoid Noise

### Core Philosophy
**Primary concern**: Chat must not become so "noisy" that people ignore everything. Better to start minimal and grow based on actual usage patterns than overwhelm users from the start.

### Initial Launch (Phase 1: Minimal Noise)
**What we'll build first:**
- **Direct messages only** - 1-on-1 or small group conversations
- **No group-wide broadcasts** initially
- **Conservative notification defaults** - only for direct messages to the user
- **Built-in noise controls** from day one:
  - Conversation-level muting
  - Clear unread management
  - Easy archive/dismiss options

**What we'll deliberately exclude initially:**
- Group-wide messaging (too high noise potential)
- Auto-notifications for group conversations user didn't initiate
- Complex notification preferences (keep simple)

### Iterative Refinement Strategy
1. **Monitor engagement patterns** - Are people using chat without getting overwhelmed?
2. **Gather specific feedback** - What additional features do they actually want?
3. **Data-driven expansion** - Add features based on real usage, not assumptions
4. **Gradual introduction** - Roll out group-wide features with careful controls

### Success Criteria for Phase 1
- High chat adoption without user complaints about noise
- Users keep notifications enabled (don't turn them off)
- Positive feedback on chat discoverability and usefulness
- Evidence that chat reduces reliance on external messaging apps

### Lessons from Previous Community App Failure
- **Communication bottleneck**: Only admin could message → solved by direct messaging
- **Noise problem**: "Weirdos" posting too much → solved by starting with 1-on-1 only
- **Engagement drop**: People ignored notifications → solved by conservative defaults

This approach aligns with the **Community OS vision**: start simple, grow modularly based on actual community needs rather than assumed features.

## Open Questions (For Future Phases)

1. **Group-wide message permissions**: Should any group member be able to message the entire group, or just admins?

2. **Cross-group discovery**: How do users find and connect with people from other groups they don't know yet?

3. **Notification strategy**: How do chat notifications integrate with the broader content notification system?

4. **Message retention**: How long should chat history be preserved? Should it vary by conversation type?

5. **Moderation**: What tools do group admins need for managing group-wide conversations?

This design balances the complexity of multi-group relationships with the need for intuitive, familiar chat UX patterns while prioritizing sustainable adoption over feature completeness.
